<!-- ========== HEADER ========== -->
<header
  id="main-header"
  class="fixed top-0 left-0 z-50 w-full h-16 lg:h-20 transition-all duration-300"
  [class.backdrop-blur-md]="scrolled"
  [class.bg-white/70]="scrolled"
  [class.dark:bg-neutral-900/70]="scrolled"
>
  <nav
    class="relative max-w-7xl w-full h-full flex items-center px-4 md:px-6 lg:px-8 mx-auto"
  >
    <!-- Logo -->
    <a
      routerLink="/"
      aria-label="Scrappy"
      class="shrink-0 flex items-center font-semibold focus:outline-hidden focus:opacity-80"
    >
      <svg
        class="h-8 lg:h-9 w-auto text-black dark:text-neutral-100"
        viewBox="0 0 640 120"
        xmlns="http://www.w3.org/2000/svg"
        role="img"
      >
        <title>Scrappy</title>
        <text x="0" y="85" font-weight="700" font-size="80" fill="currentColor">
          Scrappy
        </text>
      </svg>
    </a>
    <!-- ============ HAMBURGER (MOBILE ONLY) ============ -->
<!-- Modern Minimal Hamburger -->
<button
  type="button"
  class="lg:hidden ms-auto flex items-center justify-center w-11 h-11 rounded-lg
         border border-gray-300/60 dark:border-neutral-700/60
         bg-white/80 dark:bg-neutral-900/80 backdrop-blur-sm
         hover:bg-gray-100/80 dark:hover:bg-neutral-800/80
         transition-all duration-300"
  (click)="toggleMobile()"
  aria-label="Toggle menu"
>
  <div class="relative w-6 h-4">
    <!-- Line 1 -->
    <span
      class="absolute block h-[2px] w-full rounded-full bg-gray-800 dark:bg-neutral-200 transition-all duration-300"
      [class.translate-y-[6px]]="mobileOpen"
      [class.rotate-45]="mobileOpen"
    ></span>

    <!-- Line 2 -->
    <span
      class="absolute block h-[2px] w-full rounded-full bg-gray-800 dark:bg-neutral-200 top-[6px] transition-all duration-300"
      [class.opacity-0]="mobileOpen"
    ></span>

    <!-- Line 3 -->
    <span
      class="absolute block h-[2px] w-full rounded-full bg-gray-800 dark:bg-neutral-200 top-[12px] transition-all duration-300"
      [class.-translate-y-[6px]]="mobileOpen"
      [class.-rotate-45]="mobileOpen"
    ></span>
  </div>
</button>




    <!-- =================== DESKTOP NAV =================== -->
    <div class="hidden lg:flex grow items-center justify-end gap-x-7 ms-auto">
      @if (!auth.isLoggedIn()) {
        <!-- Public nav links -->
        <a
          routerLink="/"

          class="nav-link relative inline-block text-black dark:text-neutral-100
                 after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0
                 after:bg-[#4F46E5] dark:after:bg-[#FFE135]
                 after:transition-all after:duration-300
                 hover:after:w-full active:text-[#4F46E5] dark:active:text-[#FFE135]
                 active:after:w-full"
          (click)="closeMobile()"
        >
          Home
        </a>
        <a
          routerLink="/about-us-page"
          class="nav-link relative inline-block text-black dark:text-neutral-100
                 after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0
                 after:bg-[#4F46E5] dark:after:bg-[#FFE135]
                 after:transition-all after:duration-300
                 hover:after:w-full active:text-[#4F46E5] dark:active:text-[#FFE135]
                 active:after:w-full"
          (click)="closeMobile()"
        >
          About Scrappy
        </a>
        <a
          routerLink="contact-us"
          class="nav-link relative inline-block text-black dark:text-neutral-100
                 after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0
                 after:bg-[#4F46E5] dark:after:bg-[#FFE135]
                 after:transition-all after:duration-300
                 hover:after:w-full active:text-[#4F46E5] dark:active:text-[#FFE135]
                 active:after:w-full"
          (click)="closeMobile()"
        >
          Contact Us
        </a>
      } @else {
        <!-- Logged-in nav links -->
        <a
          routerLink="/chat-page"
          class="nav-link relative inline-block text-black dark:text-neutral-100
                 after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0
                 after:bg-[#4F46E5] dark:after:bg-[#FFE135]
                 after:transition-all after:duration-300
                 hover:after:w-full active:text-[#4F46E5] dark:active:text-[#FFE135]
                 active:after:w-full"
          (click)="closeMobile()"
        >
          Chat
        </a>
        <a
          routerLink="/marketplace-page"
          class="nav-link relative inline-block text-black dark:text-neutral-100
                 after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0
                 after:bg-[#4F46E5] dark:after:bg-[#FFE135]
                 after:transition-all after:duration-300
                 hover:after:w-full active:text-[#4F46E5] dark:active:text-[#FFE135]
                 active:after:w-full"
          (click)="closeMobile()"
        >
          Marketplace
        </a>
        <a
          routerLink="/forum-page"
          class="nav-link relative inline-block text-black dark:text-neutral-100
                 after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0
                 after:bg-[#4F46E5] dark:after:bg-[#FFE135]
                 after:transition-all after:duration-300
                 hover:after:w-full active:text-[#4F46E5] dark:active:text-[#FFE135]
                 active:after:w-full"
          (click)="closeMobile()"
        >
          Forums
        </a>
        <a
          routerLink="cart-page"
          class="nav-link relative inline-block text-black dark:text-neutral-100
                 after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0
                 after:bg-[#4F46E5] dark:after:bg-[#FFE135]
                 after:transition-all after:duration-300
                 hover:after:w-full active:text-[#4F46E5] dark:active:text-[#FFE135]
                 active:after:w-full"
          (click)="closeMobile()"
        >
          My Cart
        </a>
      }

      <!-- =================== DARK MODE TOGGLE =================== -->
      <button
        (click)="toggleTheme()"
        class="relative flex items-center justify-center w-10 h-10 rounded-full border border-gray-300 dark:border-neutral-700
               bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-200 hover:bg-gray-200 dark:hover:bg-neutral-700
               transition-all duration-300"
        aria-label="Toggle dark mode"
      >
        @if (!isDarkMode) {
          <!-- Sun Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="w-5 h-5"
          >
            <circle cx="12" cy="12" r="5" />
            <path
              d="M12 1v2m0 18v2m11-11h-2M3 12H1m17.66 5.66l-1.41-1.41M5.76 5.76L4.34 4.34m15.32 0l-1.42 1.42M5.76 18.24l-1.42 1.42"
            />
          </svg>
        } @else {
          <!-- Moon Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="w-5 h-5"
          >
            <path
              d="M21.752 15.002A9.718 9.718 0 0112 22a9.72 9.72 0 01-9.752-8.998A9.72 9.72 0 0112 2a9.72 9.72 0 019.752 8.998z"
            />
          </svg>
        }
      </button>

      <!-- Divider -->
      <div class="h-6 w-px bg-gray-900 dark:bg-neutral-700 mx-1"></div>

      <!-- =================== AUTH BUTTON / DROPDOWN =================== -->
      @if (!auth.isLoggedIn()) {
        <button
          (click)="loginButton()"
          class="nav-link relative inline-block text-black dark:text-neutral-100
                 after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0
                 after:bg-[#4F46E5] dark:after:bg-[#FFE135]
                 after:transition-all after:duration-300
                 hover:after:w-full active:text-[#4F46E5] dark:active:text-[#FFE135]
                 active:after:w-full"
        >
          Join Scrappy
        </button>
      } @else {
        <div
          class="hs-dropdown [--strategy:static] md:[--strategy:fixed] [--adaptive:none] md:[--adaptive:adaptive] [--is-collapse:true] md:[--is-collapse:false]"
        >
          <button
            id="hs-header-auth-dropdown"
            type="button"
            class="nav-link relative inline-block text-black dark:text-neutral-100
                   after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0
                   after:bg-[#4F46E5] dark:after:bg-[#FFE135]
                   after:transition-all after:duration-300
                   hover:after:w-full active:text-[#4F46E5] dark:active:text-[#FFE135]
                   active:after:w-full hs-dropdown-toggle flex items-center gap-1"
            aria-haspopup="menu"
            aria-expanded="false"
          >
            My Account
            <svg
              class="inline-block ms-1 size-4 transition-transform hs-dropdown-open:-rotate-180"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="m6 9 6 6 6-6" />
            </svg>
          </button>
          <!-- Dropdown menu unchanged -->
        </div>
      }
    </div>
  </nav>
</header>

<!-- Spacer for fixed header -->
<div class="h-16 lg:h-20"></div>


<!-- =================== MOBILE PANEL =================== -->
@if (mobileOpen) {
  <div
    id="mobile-panel"
    class="fixed inset-x-0 top-0 z-[60]
           bg-white/95 dark:bg-neutral-900/95
           backdrop-blur-2xl border-b border-gray-200/70 dark:border-neutral-800/70
           shadow-lg animate-slide-down overflow-hidden transition-all duration-300"
  >
    <!-- Header Row -->
    <div class="flex items-center justify-between px-6 py-5">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Menu</h2>

      <div class="flex items-center gap-2">
        <!-- Dark Mode Toggle -->
        <button
          (click)="toggleTheme()"
          class="flex items-center justify-center w-10 h-10 rounded-full border border-gray-300 dark:border-neutral-700
                 bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-200
                 hover:bg-gray-200 dark:hover:bg-neutral-700 transition-all duration-300"
          aria-label="Toggle dark mode"
        >
          @if (!isDarkMode) {
            <!-- Sun Icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-5 h-5"
            >
              <circle cx="12" cy="12" r="5" />
              <path
                d="M12 1v2m0 18v2m11-11h-2M3 12H1m17.66 5.66l-1.41-1.41M5.76 5.76L4.34 4.34m15.32 0l-1.42 1.42M5.76 18.24l-1.42 1.42"
              />
            </svg>
          } @else {
            <!-- Moon Icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="w-5 h-5"
            >
              <path
                d="M21.752 15.002A9.718 9.718 0 0112 22a9.72 9.72 0 01-9.752-8.998A9.72 9.72 0 0112 2a9.72 9.72 0 019.752 8.998z"
              />
            </svg>
          }
        </button>

        <!-- Close Button -->
        <button
          (click)="closeMobile()"
          class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-all"
          aria-label="Close menu"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-gray-700 dark:text-neutral-200"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Divider -->
    <div class="w-full h-px bg-gray-200/70 dark:bg-neutral-700/70 mb-4"></div>

    <!-- Nav Links -->
    <nav class="flex flex-col gap-3 px-6 pb-8 text-lg font-medium">
      @if (!auth.isLoggedIn()) {
        <a
          routerLink="/"
          (click)="closeMobile()"
          class="flex items-center justify-between py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-neutral-800/70
                 text-gray-800 dark:text-neutral-100 transition-all"
        >
          Home
          <span class="text-indigo-500 dark:text-[#FFE135]">&rsaquo;</span>
        </a>

        <a
          routerLink="/about-us-page"
          (click)="closeMobile()"
          class="flex items-center justify-between py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-neutral-800/70
                 text-gray-800 dark:text-neutral-100 transition-all"
        >
          About Scrappy
          <span class="text-indigo-500 dark:text-[#FFE135]">&rsaquo;</span>
        </a>

        <a
          routerLink="/contact-us"
          (click)="closeMobile()"
          class="flex items-center justify-between py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-neutral-800/70
                 text-gray-800 dark:text-neutral-100 transition-all"
        >
          Contact Us
          <span class="text-indigo-500 dark:text-[#FFE135]">&rsaquo;</span>
        </a>
      } @else {
        <a
          routerLink="/marketplace-page"
          (click)="closeMobile()"
          class="flex items-center justify-between py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-neutral-800/70
                 text-gray-800 dark:text-neutral-100 transition-all"
        >
          Marketplace
          <span class="text-indigo-500 dark:text-[#FFE135]">&rsaquo;</span>
        </a>

        <a
          routerLink="/forum-page"
          (click)="closeMobile()"
          class="flex items-center justify-between py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-neutral-800/70
                 text-gray-800 dark:text-neutral-100 transition-all"
        >
          Forums
          <span class="text-indigo-500 dark:text-[#FFE135]">&rsaquo;</span>
        </a>

        <a
          routerLink="/chat-page"
          (click)="closeMobile()"
          class="flex items-center justify-between py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-neutral-800/70
                 text-gray-800 dark:text-neutral-100 transition-all"
        >
          Chat
          <span class="text-indigo-500 dark:text-[#FFE135]">&rsaquo;</span>
        </a>

        <a
          routerLink="/cart-page"
          (click)="closeMobile()"
          class="flex items-center justify-between py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-neutral-800/70
                 text-gray-800 dark:text-neutral-100 transition-all"
        >
          My Cart
          <span class="text-indigo-500 dark:text-[#FFE135]">&rsaquo;</span>
        </a>
      }
    </nav>

    <!-- Bottom Buttons -->
    <div class="px-6 pb-8 border-t border-gray-200/70 dark:border-neutral-800/70 pt-6">
      @if (!auth.isLoggedIn()) {
 <button
  (click)="loginButton(); closeMobile()"
  class="w-full py-3 rounded-xl 
         bg-gradient-to-r from-[#4F46E5] to-indigo-500
         dark:from-[#FFE135] dark:to-yellow-400
         text-white dark:text-neutral-900
         font-semibold shadow-md hover:shadow-lg
         hover:brightness-105 dark:hover:brightness-110
         transition-all"
>
  Log In
</button>

      } @else {
        <button
          (click)="logoutButton(); closeMobile()"
          class="w-full py-3 rounded-xl bg-red-600/90 text-white font-semibold
                 hover:bg-red-700 shadow-md transition-all"
        >
          Log Out
        </button>
      }
    </div>
  </div>
}




